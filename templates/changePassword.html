{% extends "base.html" %}
{% block content %}
<div class="container-fluid p-3 m-3">
    <p class="h3" style="color:#777">Change Password</p>
    {% for m in msg %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Pattern Found!</strong> {{ m }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endfor %}
    <form action="/changePasswordOperation" method="post">
        <p>
            <label>New Password:</label>
            <br>
            <input type="password" size="30" name="password" id="password"><i class="bi bi-eye-slash" style="margin-left: -30px; cursor: pointer;" id="togglePassword"></i>
        </p>


        <p>
            <label>Confirm Password:</label>
            <br>
            <input type="password" size="30" name="passwordc" id="passwordc" />
        </p>
        <input class="btn btn-dark" type="submit" name="submit" id="verifybutton" value="verify">
        <input class="btn btn-dark" disabled type="submit" name="submit" id="submitbutton" value="submit">

    </form>

</div>

{%  if pswd %}
<script type="text/javascript">
    var passw = '{{ pswd }}';

    $(document).ready(function(){
        $("#password").val(passw);
        $("#passwordc").val(passw);
    });
</script>
{% endif %}

{%  if enable %}
<script type="text/javascript">
    document.getElementById("submitbutton").disabled = false;
</script>
{% endif %}

<script>
    const togglePassword = document.querySelector('#togglePassword');

    const password = document.querySelector('#password');

    togglePassword.addEventListener('click', () => {

        // Toggle the type attribute using
        // getAttribure() method
        const type = password
            .getAttribute('type') === 'password' ?'text' : 'password';
              
        password.setAttribute('type', type);

        // Toggle the eye and bi-eye icon
        this.classList.toggle('bi-eye');
    });

</script>



{% endblock %}
